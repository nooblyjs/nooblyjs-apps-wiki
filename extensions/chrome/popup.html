<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NooblyJS Wiki</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Login View -->
  <div id="loginView" class="view">
    <div class="header">
      <h1 class="app-title">NooblyJS Wiki</h1>
      <p class="app-subtitle">Access your documentation</p>
    </div>

    <div class="content">
      <form id="loginForm">
        <div class="form-group">
          <label for="serverUrl">Server URL</label>
          <input type="text" id="serverUrl" value="http://localhost:3002" required>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" placeholder="Enter email" required>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" placeholder="Enter password" required>
        </div>

        <div id="loginError" class="error-message hidden"></div>

        <button type="submit" class="btn btn-primary" id="loginBtn">
          <span class="btn-text">Sign In</span>
          <span class="spinner hidden"></span>
        </button>
      </form>
    </div>
  </div>

  <!-- Space Selection View -->
  <div id="spaceView" class="view hidden">
    <div class="header">
      <h1 class="app-title">Select Space</h1>
      <button class="icon-btn" id="logoutBtn" title="Logout">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path fill="currentColor" d="M3 3h8V1H3a2 2 0 00-2 2v14a2 2 0 002 2h8v-2H3V3zm12.59 5l-3.3-3.3 1.42-1.4L19 8.59l-5.29 5.29-1.42-1.4 3.3-3.3H7v-2h8.59z"/>
        </svg>
      </button>
    </div>

    <div class="content">
      <div id="spacesList" class="spaces-list">
        <!-- Spaces will be dynamically loaded -->
      </div>
    </div>
  </div>

  <!-- Main Navigation View -->
  <div id="mainView" class="view hidden">
    <div class="header">
      <div class="breadcrumb" id="breadcrumb">
        <button class="breadcrumb-item" id="spaceName"></button>
      </div>
      <button class="icon-btn" id="backToSpaces" title="Change Space">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path fill="currentColor" d="M11 5l-1.4 1.4 3.3 3.3H3v2h9.9l-3.3 3.3L11 16l6-6-6-6z"/>
        </svg>
      </button>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" data-tab="files">Files</button>
      <button class="tab" data-tab="recent">Recent</button>
      <button class="tab" data-tab="starred">Starred</button>
      <button class="tab" data-tab="search">Search</button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Files Tab -->
      <div id="filesTab" class="tab-pane active">
        <div id="filesList" class="files-list">
          <!-- Files and folders will be dynamically loaded -->
        </div>
      </div>

      <!-- Recent Tab -->
      <div id="recentTab" class="tab-pane hidden">
        <div id="recentList" class="files-list">
          <!-- Recent files will be dynamically loaded -->
        </div>
      </div>

      <!-- Starred Tab -->
      <div id="starredTab" class="tab-pane hidden">
        <div id="starredList" class="files-list">
          <!-- Starred files will be dynamically loaded -->
        </div>
      </div>

      <!-- Search Tab -->
      <div id="searchTab" class="tab-pane hidden">
        <div class="search-container">
          <input type="text" id="searchInput" placeholder="Search documents..." class="search-input">
          <div id="searchResults" class="files-list">
            <!-- Search results will be dynamically loaded -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Document Viewer -->
  <div id="viewerView" class="view hidden">
    <div class="header">
      <button class="icon-btn" id="backToFiles" title="Back">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path fill="currentColor" d="M11 16l-6-6 6-6 1.4 1.4-3.3 3.3H19v2H9.1l3.3 3.3L11 16z"/>
        </svg>
      </button>
      <div class="doc-title" id="docTitle"></div>
      <button class="icon-btn" id="starDocBtn" title="Star">
        <svg width="20" height="20" viewBox="0 0 20 20">
          <path fill="currentColor" d="M10 1l2.5 6.5L19 8l-5 4.5L15.5 19 10 15l-5.5 4 1.5-6.5L1 8l6.5-.5L10 1z"/>
        </svg>
      </button>
    </div>

    <div class="content doc-content" id="docContent">
      <!-- Document content will be rendered here -->
    </div>
  </div>

  <script src="js/marked.min.js"></script>
  <script src="js/api.js"></script>
  <script src="js/popup.js"></script>
</body>
</html>
