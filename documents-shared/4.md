# Wiki API Specification

## Overview

This document describes the REST API endpoints for the wiki system, including authentication, spaces management, and document operations.

## Base URL

```
https://api.example.com/applications/wiki
```

## Authentication

All API endpoints require authentication via session cookies or API keys.

### Login
```http
POST /login
Content-Type: application/json

{
  "username": "admin",
  "password": "password"
}
```

### Logout
```http
POST /logout
```

### Check Authentication
```http
GET /api/auth/check
```

## Spaces API

### List Spaces
```http
GET /api/spaces

Response:
[
  {
    "id": 1,
    "name": "Architecture Documentation",
    "description": "Enterprise architecture patterns",
    "icon": "üèóÔ∏è",
    "visibility": "team",
    "documentCount": 24,
    "createdAt": "2024-01-15T10:00:00Z",
    "updatedAt": "2024-08-20T14:30:00Z",
    "author": "Solution Architect"
  }
]
```

### Create Space
```http
POST /api/spaces
Content-Type: application/json

{
  "name": "New Space",
  "description": "Space description",
  "visibility": "team"
}
```

### Get Space Documents
```http
GET /api/spaces/{id}/documents

Response:
[
  {
    "id": 1,
    "title": "Document Title",
    "excerpt": "Document preview...",
    "author": "Author Name",
    "modifiedAt": "2024-08-20T14:30:00Z"
  }
]
```

## Documents API

### List Documents
```http
GET /api/documents

Response:
[
  {
    "id": 1,
    "title": "Document Title",
    "spaceId": 1,
    "spaceName": "Space Name",
    "excerpt": "Document preview...",
    "author": "Author Name",
    "createdAt": "2024-08-15T10:00:00Z",
    "modifiedAt": "2024-08-20T14:30:00Z",
    "views": 45,
    "tags": ["tag1", "tag2"]
  }
]
```

### Get Document
```http
GET /api/documents/{id}

Response:
{
  "id": 1,
  "title": "Document Title",
  "content": "# Markdown content...",
  "spaceId": 1,
  "spaceName": "Space Name",
  "author": "Author Name",
  "createdAt": "2024-08-15T10:00:00Z",
  "modifiedAt": "2024-08-20T14:30:00Z",
  "views": 45,
  "tags": ["tag1", "tag2"]
}
```

### Create Document
```http
POST /api/documents
Content-Type: application/json

{
  "title": "New Document",
  "content": "# Markdown content",
  "spaceId": 1,
  "tags": ["tag1", "tag2"]
}
```

### Update Document
```http
PUT /api/documents
Content-Type: application/json

{
  "id": 1,
  "title": "Updated Title",
  "content": "# Updated content",
  "spaceId": 1,
  "tags": ["tag1", "tag2"]
}
```

## Search API

### Search Documents
```http
GET /api/search?q=query

Response:
[
  {
    "id": 1,
    "title": "Document Title",
    "excerpt": "Matching excerpt...",
    "spaceName": "Space Name",
    "modifiedAt": "2024-08-20T14:30:00Z",
    "tags": ["tag1", "tag2"],
    "relevance": 0.9
  }
]
```

## Analytics API

### Recent Documents
```http
GET /api/documents/recent

Response:
[
  {
    "id": 5,
    "title": "Recent Document",
    "spaceName": "Space Name",
    "modifiedAt": "2024-08-23T10:30:00Z"
  }
]
```

### Popular Documents
```http
GET /api/documents/popular

Response:
[
  {
    "id": 3,
    "title": "Popular Document",
    "spaceName": "Space Name",
    "views": 58
  }
]
```

## Error Responses

### 400 Bad Request
```json
{
  "success": false,
  "message": "Validation error message"
}
```

### 401 Unauthorized
```json
{
  "success": false,
  "message": "Authentication required"
}
```

### 404 Not Found
```json
{
  "error": "Document not found"
}
```

### 500 Internal Server Error
```json
{
  "error": "Internal server error"
}
```

## Rate Limiting

- 1000 requests per hour per IP
- 100 requests per minute per authenticated user
- Search queries limited to 60 per minute

## Response Headers

```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1629123456
```